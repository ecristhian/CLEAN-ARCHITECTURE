{"version":3,"sources":["util/fns/hash.js"],"names":[],"mappings":";;;;;kBAgBwB,I;;AAZxB;;;;AACA;;;;;;;;;;;;;;;;;;AAWe,SAAS,IAAT,CAAc,KAAd,EAAqB;AAClC,MAAI,MAAM,EAAV;AACA,MAAI,iBAAE,WAAF,CAAc,KAAd,CAAJ,EAA0B;AACxB,4BAAS,KAAT;AACA,WAAO,QAAQ,MAAM,WAArB;AACD,GAHD,MAGO,IAAI,iBAAE,OAAF,CAAU,KAAV,CAAJ,EAAsB;AAC3B,4BAAS,KAAT;AACA,WAAO,OAAO,MAAM,WAApB;AACD,GAHM,MAGA,IAAI,iBAAE,SAAF,CAAY,KAAZ,CAAJ,EAAwB;AAC7B,WAAO,OAAO,KAAd;AACD,GAFM,MAEA,IAAI,iBAAE,MAAF,CAAS,KAAT,CAAJ,EAAqB;;;;;;AAM1B,WAAO,OAAO,KAAd;AACD,GAPM,MAOA,IAAI,iBAAE,OAAF,CAAU,KAAV,CAAJ,EAAsB;AAC3B,4BAAS,KAAT;AACA,WAAO,OAAO,MAAM,WAApB;AACD,GAHM,MAGA,IAAI,iBAAE,UAAF,CAAa,KAAb,CAAJ,EAAyB;AAC9B,4BAAS,KAAT;AACA,WAAO,OAAO,MAAM,WAApB;AACD,GAHM,MAGA,IAAI,iBAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AAC5B,WAAO,OAAO,KAAd;AACD,GAFM,MAEA,IAAI,iBAAE,KAAF,CAAQ,KAAR,CAAJ,EAAoB;AACzB,WAAO,KAAP;AACD,GAFM,MAEA,IAAI,iBAAE,MAAF,CAAS,KAAT,CAAJ,EAAqB;AAC1B,WAAO,MAAP;AACD,GAFM,MAEA,IAAI,iBAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AAC5B,4BAAS,KAAT;AACA,WAAO,OAAO,MAAM,WAApB;AACD,GAHM,MAGA,IAAI,iBAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AAC5B,WAAO,QAAQ,MAAM,QAAN,EAAf;AACD,GAFM,MAEA,IAAI,iBAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AAC5B,WAAO,OAAO,KAAd;AACD,GAFM,MAEA,IAAI,iBAAE,WAAF,CAAc,KAAd,CAAJ,EAA0B;AAC/B,WAAO,WAAP;AACD,GAFM,MAEA,IAAI,iBAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AAC5B,4BAAS,KAAT;AACA,WAAO,OAAO,MAAM,WAApB;AACD,GAHM,MAGA;AACL,UAAM,IAAI,KAAJ,CAAU,gCAAgC,KAA1C,CAAN;AACD;;AAED,MAAI,SAAS,CAAb;AACA,MAAI,IAAI,MAAJ,KAAe,CAAnB,EAAsB;AACpB,WAAO,MAAP;AACD;AACD,OAAK,IAAI,IAAI,CAAR,EAAW,OAAO,IAAI,MAA3B,EAAmC,IAAI,IAAvC,EAA6C,GAA7C,EAAkD;AAChD,QAAM,WAAW,IAAI,UAAJ,CAAe,CAAf,CAAjB;AACA,aAAU,CAAC,UAAU,CAAX,IAAgB,MAAjB,GAA2B,QAApC;AACA,aAAS,SAAS,MAAlB,C;AACD;AACD,SAAO,MAAP;AACD","file":"util/fns/hash.js","sourcesContent":["//-------------------------------------------------------------------------------\n// Imports\n//-------------------------------------------------------------------------------\n\nimport _ from 'lodash';\nimport ensureId from './ensureId';\n\n\n//-------------------------------------------------------------------------------\n// Function\n//-------------------------------------------------------------------------------\n\n/**\n * @param {*} value\n * @return {number}\n */\nexport default function hash(value) {\n  let key = '';\n  if (_.isArguments(value)) {\n    ensureId(value);\n    key += 'ar_' + value._internalId;\n  } else if (_.isArray(value)) {\n    ensureId(value);\n    key += 'a_' + value._internalId;\n  } else if (_.isBoolean(value)) {\n    key += 'b_' + value;\n  } else if (_.isDate(value)) {\n\n    // TODO BRN: Dates are not immutable. Therefore we can run in to issues here if a Date is stored as\n    // a key and then is changed later. We should rethink this and perhaps implement our own immutable\n    // Date class.\n\n    key += 'd_' + value;\n  } else if (_.isError(value)) {\n    ensureId(value);\n    key += 'e_' + value._internalId;\n  } else if (_.isFunction(value)) {\n    ensureId(value);\n    key += 'f_' + value._internalId;\n  } else if (_.isNumber(value)) {\n    key += 'n_' + value;\n  } else if (_.isNaN(value)) {\n    key += 'nan';\n  } else if (_.isNull(value)) {\n    key += 'null';\n  } else if (_.isRegExp(value)) {\n    ensureId(value);\n    key += 'r_' + value._internalId;\n  } else if (_.isSymbol(value)) {\n    key += 'sy_' + value.toString();\n  } else if (_.isString(value)) {\n    key += 's_' + value;\n  } else if (_.isUndefined(value)) {\n    key += 'undefined';\n  } else if (_.isObject(value)) {\n    ensureId(value);\n    key += 'o_' + value._internalId;\n  } else {\n    throw new Error('Unrecognized type to hash: ' + value);\n  }\n\n  let result = 0;\n  if (key.length === 0) {\n    return result;\n  }\n  for (let i = 0, size = key.length; i < size; i++) {\n    const charCode = key.charCodeAt(i);\n    result = ((result << 5) - result) + charCode;\n    result = result & result; // Convert to 32bit integer\n  }\n  return result;\n}\n"],"sourceRoot":"/source/"}